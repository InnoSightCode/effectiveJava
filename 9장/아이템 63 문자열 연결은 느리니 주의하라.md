# 아이템 63. 문자열 연결은 느리니 주의하라

문자열 연결 연산자(+)는 여러 문자열을 하나로 합쳐주는 편리한 수단이다.

문자열 연결 연산자로 문자열 n개를 잇는 시간은 n제곱에 비례한다.

보통 "문자열 연결 연산자(+)"로 문자열 n개를 이어 붙일 때 **시간 복잡도가 O(n2)**

이유는 **문자열의 불변성(immutability)** 때문이다.

### 1. `String` (불변 객체)

- `String`은 **불변(immutable)**이라 한 번 만들어지면 내용을 바꿀 수 없어요.
- `"abc" + "def"` 하면,
    
    → `"abcdef"`라는 **새 char 배열**을 만들고
    
    → `"abc"` + `"def"` 내용을 **모두 복사**해야 함.
    
- 그래서 `n`번 연결하면, 매번 새로운 배열 + 매번 전체 복사 → 총 비용 = **O(n²)**.

## 2. `StringBuilder` (가변 객체)

- `StringBuilder`는 내부적으로 **하나의 가변 char[] 버퍼**를 가지고 있어요.
- 문자열을 `append` 하면:
    - 현재 버퍼의 남는 공간에 새로운 문자열을 **그냥 이어쓰기만 함** (복사 X).
    - 버퍼가 부족하면, 더 큰 배열을 한 번 새로 만들고 기존 내용을 복사한 뒤 거기에 계속 씀.
        - 이건 배열 `ArrayList`가 크기 늘릴 때 방식과 같음 (보통 1.5~2배씩 확장).

## 10만개 문자열 테스트

<img width="2103" height="1334" alt="image" src="https://github.com/user-attachments/assets/9dc91293-6c71-4f56-9fd5-ac2c88cff393" />


## LETS 사용

```java
		StringBuilder sb = new StringBuilder();
		
		if (CENTER.equals(nextFpisApprover) || HEADQUARTER.equals(nextFpisApprover)) {
			sb.append("안녕하십니까 ").append(rcvName).append("님\n신규 거래처가 등록되었습니다.\n거래처관리 화면에 입력된 내용을 확인하시어 FPIS 승인을 해주시길 바랍니다.");
			sb.append("\n*바로가기 링크 : https://lets.lottegl.com/view/mst/NTCM20020\n");
			sb.append("\n- 신규 거래처 : ").append(custNm).append("(").append(custCd).append(")");
			sb.append("\n- 승인 요청자 : ").append(userNm);
			sb.append("\n- 승인 담당자 : ").append(rcvName);
		} else if (APPROVAL_DONE.equals(nextFpisApprover)) {
			sb.append("안녕하십니까 ").append(rcvName).append("님\n신규 거래처 FPIS 본사 승인이 완료되었습니다.\n추후 수정사항이 있으실 경우 IS팀에 문의해주시길 바랍니다.\n");
			sb.append("\n- 신규 거래처 : ").append(custNm).append("(").append(custCd).append(")");
			sb.append("\n- 승인 담당자 : ").append(userNm);
			sb.append("\n- 승인 요청자 : ").append(rcvName);
		}
		
		return sb.toString();
```
