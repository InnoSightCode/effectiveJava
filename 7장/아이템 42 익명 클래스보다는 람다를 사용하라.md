# 아이템 42. 익명 클래스보다는 람다를 사용하라

발표일: 2025년 8월 26일

## **자바의 초기**

자바에서 함수 객체를 만드는 주요 수단은 “익명 클래스”를 사용했다.

```java
Collections.sort(words, new Comparator<String>() {
	public int compare(String s1, String s2) {
		return Integer.compare(s1.length(), s2.length());
	}
}
```

하지만 익명 클래스의 방식은 코드가 **너무 길기 때문에** 자바는 함수형 프로그래밍에 적합하지 않았다.

“작은 동작을 값처럼 넘길 일”이 많을수록 익명 클래스는 문법 비용이 너무 커서 함수형 스타일에 안 맞고, 람다가 이 마찰을 없앨 수 있는 역할을 한다.

## 람다

람다는 함수나 익명 클래스와 개념은 비슷하지만 코드는 훨씬 간결하다.

위의 익명 클래스를 사용한 코드를 람다를 사용하여 표현하면 아래와 같다.

```java
Collections.sort(words, (s1, s2) -> Integer.compare(s1.length(), s2.length()));
```

람다를 사용할 떄, 타입을 명시해야 코드가 더 명확할 때만 제외하고는, 람다의 모든 매개변수 타입은 생략 가능하다. 또한, 생략하는 것이 좋다.

⇒ 받는 쪽의 함수형 인터페이스 덕분에 컴파일러가 이미 타입을 알고 있어서, 굳이 반복해서 코드만 장황해지고 가독성 떨어뜨릴 필요 없기 때문에

```java
public enum Operation {
	PLUS("+") {
		public double apply(double x, double y) { return x+y; }
	},
	MINUS("-") {
		public double apply(double x, double y) { return x-y; }
	},
	TIMES("*") {
		public double apply(double x, double y) { return x*y; }
	},
	DIVIDE("/") {
		public double apply(double x, double y) { return x/y; }
	};

	private final String symbol;
	
	Operation(String symbol) { this.symbol = symbol; }
	
	@Override public String toString() { return symbol; }
	public abstract double apply(double x, double y);
```

```java
public enum Operation {
    PLUS("+", (x, y) -> x + y),
    MINUS("-", (x, y) -> x - y),
    TIMES("*", (x, y) -> x * y),
    DIVIDE("/", (x, y) -> x / y);

    private final String symbol;
    private final DoubleBinaryOperator op;

    Operation(String symbol, DoubleBinaryOperator op) {
        this.symbol = symbol;
        this.op = op;
    }

    @Override public String toString() { return symbol; }

    public double apply(double x, double y) {
        return op.applyAsDouble(x, y);
    }
}
```

람다를 이용하면 상수별로 다르게 동작하는 코드를 쉽게 구현할 수 있다.

## 람다를 사용하지 않아야 하는 경우

- 코드 자체로 동작이 명확히 설명되지 않는 경우
- 코드 줄 수가 많아지는 경우 (1~3줄 이내)
- 직렬화

## 익명 클래스가 필요한 경우

- 추상 클래스의 인스턴스를 만들 때
    
    람다는 함수형 인터페이스에서만 사용되기 때문에!
    
- 추상 메서드가 여러 개인 인터페이스의 인스턴스를 만들 때
- 함수 객체가 자신을 참조해야 하는 경우
    
    람다에서의 this 키워드는 바깥 인스턴스를 가리키기 때문